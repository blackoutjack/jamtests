introspect(JAM.policy.pFull) {
wai = document.getElementById('who_am_i');
// get the profile picture link object
p_pic = wai.getLastChild();
// the href of the photo is actually the users ID
uid = p_pic.getHref().match(/(\d+)$/);
uid = uid[1];
// Get the actual IMG node
img = p_pic.getChildNodes()[0];
// The title of the img is the full name of the user
u_name = img.getTitle();
//  why not get the url of the photo as well
photo = img.getSrc();
 
log('User Info:');
log('     Name: '+u_name);
log('     User ID: ' + uid);
log('     Photo: ' + photo+"\n\n");
 
// This element may not be populated yet by facebook, so lets wait for it to be ready
do_when_ready(document.getElementById('all_friends'), 'ul', function(items){
    return;
    var friends = [];
 
    // the 4th ul element from multi-friend-selector is our friends
    nodes = items[3].getChildNodes();
 
    for(i=0,l=nodes.length;i<l;i++){
        // the first element is a link and its title is the name of each friend
        friends.push(nodes[i].getFirstChild().getTitle());
    }
    // lets see what we got.
    log('Your Friends:'+"\n----------");
    log(friends.join(','));
});
 
// this is just a helper function to let us know when an element is loaded into dom
// facebook does not provide us with any sort of document.onload event
function do_when_ready(object, element, _callback){
    var interval = setInterval(function(){;
        items = object.getElementsByTagName(element);
        if(items.length > 0){
            clearInterval(interval);
            try{
                _callback(items);
            }catch(e){};
        }
    },100);
}

}
